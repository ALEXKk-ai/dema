<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>School Food Delivery</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { 
            font-family: Arial, sans-serif; 
            background: #f5f5f5; 
            padding: 20px; 
            scroll-behavior: smooth; 
        }
        body.no-scroll { overflow: hidden; }
    

        .navigation-bar {
            max-width: 1200px; margin: 0 auto 20px; padding: 0 20px;
            display: flex; align-items: center; gap: 15px; flex-wrap: wrap; position: relative;
        }
        .back-btn, .cart-btn {
            padding: 10px; background: #9b59b6; color: white; border: none;
            border-radius: 5px; cursor: pointer; width: 40px; height: 40px;
            display: flex; align-items: center; justify-content: center; transition: background 0.3s ease;
        }
        .back-btn:hover, .cart-btn:hover { background: #8a4ca6; }
        .cart-btn { position: absolute; right: 20px; }
        .cart-badge { position: absolute; top: -5px; right: -5px; background: #ff4444; color: white;
            border-radius: 50%; width: 18px; height: 18px; font-size: 12px; text-align: center; line-height: 18px; }
        .search-wrapper { flex: 1; width: 100%; }
        .search-container { position: relative; width: 100%; }
        .search-input { width: 100%; padding: 15px 45px 15px 20px; border: 1px solid #e0e0e0;
            border-radius: 10px; font-size: 16px; background: white; box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05); }
        .search-icon { position: absolute; right: 15px; top: 50%; transform: translateY(-50%); color: #9b59b6; }

        .restaurant-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 25px;
            max-width: 1200px; margin: 0 auto; padding: 20px; }
        .restaurant-item { background: white; border-radius: 10px; overflow: hidden;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1); cursor: pointer; transition: transform 0.3s ease; }
        .restaurant-item:hover { transform: translateY(-5px); }
        .restaurant-image-container { width: 100%; height: 200px; overflow: hidden; }
        .restaurant-image { width: 100%; height: 100%; object-fit: cover; }
        .restaurant-info { padding: 15px; text-align: left; }
        .restaurant-name { font-size: 18px; font-weight: 600; color: #333; margin-bottom: 8px; }
        .restaurant-rating { display: flex; align-items: center; gap: 5px; color: #666; }
        .restaurant-rating i { color: #ffd700; }

        .menu-view { max-width: 1200px; margin: 0 auto; padding: 20px; }
        .restaurant-banner { position: relative; width: 100%; height: 300px; margin-bottom: 30px;
            border-radius: 10px; overflow: hidden; box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1); }
        .home-banner { position: relative; width: 100%; height: 200px; margin-bottom: 20px;
            border-radius: 10px; overflow: hidden; box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1); }
        .banner-image { width: 100%; height: 100%; object-fit: cover; }
        .banner-overlay { position: absolute; bottom: 0; left: 0; right: 0; padding: 20px;
            background: linear-gradient(to top, rgba(0, 0, 0, 0.7), transparent); color: white; }
        .banner-title { font-size: 28px; font-weight: 600; margin-bottom: 10px; }

        .location-wrapper { max-width: 1200px; margin: 20px auto; padding: 0 20px; text-align: left; }
        .location-container { display: flex; align-items: center; gap: 15px; flex-wrap: wrap; }
        .location-container label { font-size: 16px; color: #333; font-weight: 600; }
        .location-container select { padding: 10px; border-radius: 5px; border: 1px solid #e0e0e0;
            font-size: 16px; width: 100%; max-width: 300px; background: white; cursor: pointer; display: block; }
        .location-button { padding: 10px 20px; background: white; color: #333; border: 1px solid #e0e0e0;
            border-radius: 5px; font-size: 16px; cursor: pointer; transition: background 0.3s ease; display: none;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05); }
        .location-button:hover { background: #f0f0f0; }
        .location-hint { font-size: 14px; color: #444; font-style: italic; font-weight: bold; line-height: 1.4; }

        .modal-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0, 0, 0, 0.5);
            display: none; justify-content: center; align-items: center; z-index: 1000; }
        .modal-content { background: white; width: 90%; max-height: 80vh; border-radius: 10px;
            overflow-y: auto; position: relative; padding: 20px; }
        .modal-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px; }
        .modal-header h2 { font-size: 20px; font-weight: 600; color: #333; }
        .modal-close { background: none; border: none; font-size: 24px; cursor: pointer; color: #666; }
        .modal-close:hover { color: #333; }
        .modal-search { width: 100%; padding: 10px; border: 1px solid #e0e0e0; border-radius: 5px;
            font-size: 16px; margin-bottom: 15px; }
        .zone-group { margin-bottom: 15px; }
        .zone-title { font-size: 18px; font-weight: 600; color: #333; margin-bottom: 10px; }
        .hall-option { padding: 10px; font-size: 16px; color: #333; background: #f9f9f9;
            border-radius: 5px; margin-bottom: 5px; cursor: pointer; transition: background 0.3s ease; }
        .hall-option:hover { background: #e0e0e0; }

        .category-section { margin-bottom: 30px; }
        .category-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; }
        .category-title { font-size: 24px; font-weight: 600; color: #333; }
        .see-more-btn { padding: 8px 15px; background: #9b59b6; color: white; border: none;
            border-radius: 5px; cursor: pointer; font-size: 14px; transition: background 0.3s ease; }
        .see-more-btn:hover { background: #8a4ca6; }
        .dishes-grid { display: flex; flex-wrap: nowrap; overflow-x: auto; gap: 20px;
            scroll-behavior: smooth; -webkit-overflow-scrolling: touch; max-width: 100%; padding-bottom: 10px;
            scrollbar-width: none; -ms-overflow-style: none; }
        .dishes-grid::-webkit-scrollbar { display: none; }
        .dishes-expanded, .category-suggestions { display: grid; grid-template-columns: repeat(4, 1fr); gap: 20px; margin-top: 20px; }
        .dish-wrapper { flex: 0 0 calc(25% - 15px); display: flex; flex-direction: column; gap: 10px;
            min-width: 0; cursor: pointer; position: relative; }
        .dish-item { background: white; border-radius: 10px; overflow: hidden;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1); height: 150px; transition: opacity 0.3s ease; position: relative; }
        .dish-image { width: 100%; height: 100%; object-fit: cover; }
        .dish-info { padding: 10px 0; text-align: left; }
        .dish-name { font-size: 14px; font-weight: 600; margin-bottom: 5px; }
        .dish-price { color: #666; font-size: 12px; }

        .add-button { position: absolute; bottom: 8px; right: 8px; width: 35px; height: 35px;
            background: #000000; color: white; border: none; border-radius: 50%; font-size: 20px;
            line-height: 35px; text-align: center; cursor: pointer; transition: background 0.3s ease; }
        .add-button:hover { background: #333333; }
        .quantity-wrapper { display: flex; align-items: center; gap: 10px; margin-top: 10px; }
        .quantity-btn { background: #9b59b6; color: white; border: none; border-radius: 5px;
            width: 40px; height: 40px; font-size: 18px; cursor: pointer; transition: background 0.3s ease; }
        .quantity-btn:hover { background: #8a4ca6; }
        .quantity-display { font-size: 16px; width: 40px; text-align: center; }
        .order-disabled { background: #cccccc !important; cursor: not-allowed !important; }
        .fixed-order-btn { 
            position: fixed; 
            bottom: 20px; 
            left: 50%; 
            transform: translateX(-50%);
            width: 200px; 
            padding: 15px; 
            background: #9b59b6; 
            color: white; 
            border: none; 
            border-radius: 5px; 
            cursor: pointer; 
            z-index: 10; 
        }
        .button-container { text-align: center; margin: 20px 0; }

        .notification-overlay { 
            position: fixed; top: 0; left: 0; width: 100%; height: 100%; 
            background: rgba(0, 0, 0, 0.6); display: none; justify-content: center; 
            align-items: center; z-index: 2000; 
        }
        .notification-content { 
            background: white; padding: 20px; border-radius: 10px; 
            width: 90%; max-width: 400px; text-align: center; 
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.2); 
        }
        .notification-content h3 { 
            color: #9b59b6; font-size: 22px; margin-bottom: 15px; 
        }
        .notification-content p { 
            color: #333; font-size: 16px; margin-bottom: 20px; 
        }
        .notification-content button { 
            padding: 10px 20px; background: #9b59b6; color: white; 
            border: none; border-radius: 5px; cursor: pointer; 
            transition: background 0.3s ease; 
        }
        .notification-content button:hover { background: #8a4ca6; }
        .notification-error h3 { color: #ff4444; }

        .error-input { border: 2px solid #ff4444; }

        .custom-dropdown {
            position: relative;
            width: 100%;
            margin: 10px 0;
        }
        .dropdown-selected {
            padding: 15px;
            background: white;
            border: 1px solid #e0e0e0;
            border-radius: 5px;
            font-size: 16px;
            color: #333;
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .dropdown-selected:after {
            content: '\f078';
            font-family: 'Font Awesome 6 Free';
            font-weight: 900;
        }
        .dropdown-menu {
            display: none;
            position: absolute;
            top: 100%;
            left: 0;
            width: 100%;
            background: white;
            border: 1px solid #e0e0e0;
            border-radius: 5px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
            z-index: 10;
        }
        .dropdown-menu.show {
            display: block;
        }
        .dropdown-option {
            padding: 15px;
            font-size: 16px;
            color: #333;
            cursor: pointer;
            transition: background 0.3s ease;
        }
        .dropdown-option:hover {
            background: #f0f0f0;
        }

        .cart-item-price { font-size: 14px; color: #666; }
        .cart-location-notice { 
            font-size: 12px; 
            color: #ff4444; 
            font-style: italic; 
            margin-top: 5px; 
        }

        @media (max-width: 1200px) {
            .restaurant-grid, .dishes-expanded, .category-suggestions { grid-template-columns: repeat(3, 1fr); }
            .dish-wrapper { flex: 0 0 calc(33.33% - 13.33px); }
        }
        @media (max-width: 768px) {
            .restaurant-grid, .dishes-expanded, .category-suggestions { grid-template-columns: repeat(2, 1fr); }
            .dish-wrapper { flex: 0 0 calc(50% - 10px); }
            .location-container { flex-direction: column; align-items: flex-start; gap: 10px; }
            .location-container select { display: none; }
            .location-button { display: block; }
        }
        @media (max-width: 480px) {
            .restaurant-grid { grid-template-columns: 1fr; }
            .dish-item { height: 200px; }
            .fixed-order-btn { width: 150px; font-size: 14px; }
        }
    </style>
</head>
<body>
    <div id="mainContent"></div>
    <div id="locationModal" class="modal-overlay">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Choose Your Location</h2>
                <button class="modal-close" onclick="closeLocationModal()" aria-label="Close">Ã—</button>
            </div>
            <input type="text" class="modal-search" id="locationSearch" placeholder="Search locations..." onkeyup="filterLocations(this.value)">
            <div id="locationOptions"></div>
        </div>
    </div>
    <div id="notificationModal" class="notification-overlay">
        <div class="notification-content" id="notificationContent">
            <h3 id="notificationTitle"></h3>
            <p id="notificationMessage"></p>
            <button onclick="closeNotification()">OK</button>
        </div>
    </div>

    <script>
       
const restaurants = [
            { id: 1, name: "Midcity", rating: 4.5, image: "/images/midcity.jpg" },
            { id: 2, name: "DHL Lakers", rating: 4.4, image: "/api/placeholder/400/320" },
            { id: 3, name: "Lakers Junior", rating: 4.4, image: "/api/placeholder/400/320" },
            { id: 4, name: "Winners", rating: 4.4, image: "/api/placeholder/400/320" },
            { id: 5, name: "Hashtag", rating: 4.2, image: "/api/placeholder/400/320" },
            { id: 6, name: "Masaai Kitchen", rating: 4.2, image: "/api/placeholder/400/320" },
            { id: 7, name: "Blessed", rating: 4.1, image: "/api/placeholder/400/320" },
            { id: 8, name: "Hot Grill", rating: 4.1, image: "/api/placeholder/400/320" },
            { id: 9, name: "Faith Hotel", rating: 4.0, image: "/api/placeholder/400/320" }
           
        ];

        const dishes = {
            midcity: {
                "Chapati Dishes": [
                    { id: 1, name: "Chapati", price: 10, itemDeliveryFee: 3, image: "/api/placeholder/400/320" },
                    { id: 2, name: "Chapati(3) Beans", price: 70, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 3, name: "Chapati(2) Ndengu", price: 60, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 4, name: "Chapati(2) Mix", price: 60, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 5, name: "Chapati(2) Viazi", price: 60, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 6, name: "Matoke Chapati(2)", price: 40, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 7, name: "Chapati(2) Matumbo", price: 80, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 8, name: "Chapati(2) Beef", price: 120, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 9, name: "Chapati(2) Kuku", price: 140, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 10, name: "Minji Waru Chapati(2)", price: 100, itemDeliveryFee: 5, image: "/api/placeholder/400/320" }
                ],
                "Rice Dishes": [
                    { id: 11, name: "Rice Plain", price: 40, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 12, name: "Rice Chapati(2)", price: 60, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 13, name: "Rice Beans", price: 60, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 14, name: "Rice Ndengu", price: 60, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 15, name: "Rice Mix", price: 60, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 16, name: "Rice Veges", price: 60, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 17, name: "Rice Matoke", price: 70, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 18, name: "Rice Macho(Mayai)", price: 80, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 19, name: "Rice Minji Waru", price: 100, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 20, name: "Rice Matumbo", price: 80, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 21, name: "Rice Beef", price: 120, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 22, name: "Rice Kuku", price: 140, itemDeliveryFee: 5, image: "/api/placeholder/400/320" }
                ],
                "Pilau Dishes": [
                    { id: 23, name: "Pilau plain", price: 70, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 24, name: "Pilau Beans", price: 100, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 25, name: "Pilau Veges", price: 100, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 26, name: "Pilau Viazi", price: 100, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 27, name: "Pilau Minji", price: 120, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 28, name: "Pilau Matumbo", price: 120, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 29, name: "Pilau Beef", price: 130, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 30, name: "Pilau Kuku", price: 150, itemDeliveryFee: 5, image: "/api/placeholder/400/320" }
                ],
                "Ugali Dishes": [
                    { id: 31, name: "Ugali plain", price: 30, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 32, name: "Ugali Beans", price: 60, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 33, name: "Ugali Veges", price: 60, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 34, name: "Ugali Viazi", price: 70, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 35, name: "Ugali Mix", price: 60, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 36, name: "Ugali Macho(Mayai)", price: 80, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 37, name: "Ugali Omena", price: 70, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 38, name: "Ugali Matumbo", price: 80, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 39, name: "Ugali Beef", price: 120, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 40, name: "Ugali Kuku", price: 140, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 41, name: "Ugali Samaki", price: 120, itemDeliveryFee: 5, image: "/api/placeholder/400/320" }
                ],
                "Githeri Dishes": [
                    { id: 42, name: "Githeri plain", price: 50, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 43, name: "Githeri Veges", price: 70, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 44, name: "Githeri Chapo(2)", price: 70, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 45, name: "Githeri Rice", price: 70, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 46, name: "Githeri Viazi", price: 70, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 47, name: "Githeri Matumbo", price: 100, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 48, name: "Githeri Beef", price: 130, itemDeliveryFee: 5, image: "/api/placeholder/400/320" }
                ],
                "Mukimo Dishes": [
                    { id: 49, name: "Mukimo plain", price: 70, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 50, name: "Mukimo Veges", price: 100, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 51, name: "Mukimo Beans", price: 100, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 52, name: "Mukimo Minji", price: 110, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 53, name: "Mukimo Kuku", price: 150, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 54, name: "Mukimo Matumbo", price: 110, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 55, name: "Mukimo Beef", price: 120, itemDeliveryFee: 5, image: "/api/placeholder/400/320" }
                ],
                "Additional Dishes": [
                    { id: 56, name: "Ndazi", price: 10, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 57, name: "Sweet Potato", price: 50, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 58, name: "Boiled Egg", price: 25, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 59, name: "Fry Egg(2)", price: 60, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 60, name: "Beans Plain", price: 40, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 61, name: "Ndengu Plain", price: 40, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 62, name: "Mix Plain", price: 40, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 63, name: "Viazi Plain", price: 40, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 64, name: "Beef Plain", price: 100, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 65, name: "Minji Plain", price: 60, itemDeliveryFee: 5, image: "/api/placeholder/400/320" }
                ]
            },
            lakersjunior: {
               "Chapati Dishes": [
                    { id: 66, name: "Chapati", price: 10, itemDeliveryFee: 3, image: "/api/placeholder/400/320" },
                    { id: 67, name: "Chapati(1) Beans", price: 50, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 68, name: "Chapati(1) Ndengu", price: 50, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 69, name: "Chapati(1) Mix", price: 40, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 70, name: "Chapati(1) Minji", price: 70, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 71, name: "Chapati(1) Yellow beans", price: 50, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 72, name: "Chapati(2) Kamande", price: 70, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 73, name: "Chapati(2) Viazi", price: 60, itemDeliveryFee: 5, image: "/api/placeholder/400/320" }
                
                
                
                
                    
                ],
                "Rice Dishes": [
                    { id: 74, name: "Rice Plain", price: 40, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 75, name: "Rice Chapati(2)", price: 60, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 76, name: "Rice Beans", price: 80, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 77, name: "Rice Ndengu", price: 70, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 78, name: "Rice Mix", price: 70, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 79, name: "Rice Kamande", price: 90, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 80, name: "Rice Minji", price: 100, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 81, name: "Rice Matumbo", price: 110, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 82, name: "Rice Beef", price: 130, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 83, name: "Rice Kuku", price: 140, itemDeliveryFee: 5, image: "/api/placeholder/400/320" }
                ],
                "Pilau Dishes": [
                    { id: 84, name: "Pilau plain", price: 70, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 85, name: "Pilau Kamande", price: 110, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 86, name: "Pilau Matumbo", price: 120, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 87, name: "Pilau Beef", price: 130, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 88, name: "Pilau Kuku", price: 160, itemDeliveryFee: 5, image: "/api/placeholder/400/320" }
                ],
                "Ugali Dishes": [
                    { id: 89, name: "Ugali plain", price: 30, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 90, name: "Ugali Kienyeji", price: 80, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 91, name: "Ugali Cabbage", price: 60, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 92, name: "Ugali Sukuma", price: 60, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 93, name: "Ugali Mix", price: 60, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 94, name: "Ugali Fried Eggs", price: 100, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 95, name: "Ugali Omena", price: 80, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 96, name: "Ugali Matumbo", price: 100, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 97, name: "Ugali Beef", price: 130, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 98, name: "Ugali Kuku", price: 130, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 99, name: "Ugali Minji", price: 50, itemDeliveryFee: 5, image: "/api/placeholder/400/320" }
                ],
               
                "Mukimo Dishes": [
                    { id: 100, name: "Mukimo plain", price: 60, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 101, name: "Mukimo Matumbo", price: 100, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 102, name: "Mukimo Beef", price: 130, itemDeliveryFee: 5, image: "/api/placeholder/400/320" }
                ],
                "Additional Dishes": [
                    { id: 103, name: "Ndazi", price: 5, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 104, name: "Doughnut", price: 10, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 105, name: "Boiled Egg", price: 25, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 106, name: "Fried Egg", price: 35, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 107, name: "Beans Plain", price: 40, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 108, name: "Ndengu Plain", price: 30, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 109, name: "Mix Plain", price: 30, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 110, name: "Kebab", price: 40, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 111, name: "Beef Plain", price: 100, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 112, name: "Minji Plain", price: 60, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 113, name: "Yellow Beans", price: 40, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 114, name: "Kamande Plain", price: 50, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 115, name: "Githeri", price: 60, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 116, name: "Matumbo Plain", price: 70, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 117, name: "Veges", price: 30, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 118, name: "Sukuma", price: 30, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 119, name: "Cabbage", price: 40, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 120, name: "Omena Plain", price: 50, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 121, name: "Matoke Plain", price: 60, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 122, name: "Matoke Matumbo", price: 100, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 123, name: "Matoke Beef", price: 130, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 124, name: "Kuku", price: 100, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 125, name: "Biryani Kuku", price: 170, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 126, name: "Biryani Beef", price: 150, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 127, name: "Samosa Ndengu", price: 15, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 128, name: "Samosa Nyama", price: 25, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 129, name: "Samosa Viazi", price: 15, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 130, name: "Mitai", price: 20, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 131, name: "Smokie Kachumbari", price: 40, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 132, name: "Chips", price: 80, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 133, name: "Viazi Karai", price: 20, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 134, name: "Bhajia", price: 20, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 135, name: "Smocha", price: 50, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 136, name: "Chips Kuku", price: 150, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 137, name: "Smokie", price: 35, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                ]
            },
            dhllakers: {
                "Chapati Dishes": [
                    { id: 138, name: "Chapati", price: 10, itemDeliveryFee: 3, image: "/api/placeholder/400/320" },
                    { id: 139, name: "Chapati(1) Beans", price: 50, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 140, name: "Chapati(1) Ndengu", price: 40, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 141, name: "Chapati(1) Mix", price: 40, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 142, name: "Chapati(1) Minji", price: 70, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 143, name: "Chapati(2) Kamande", price: 70, itemDeliveryFee: 5, image: "/api/placeholder/400/320" }
    
                    
                ],
                "Rice Dishes": [
                    { id: 144, name: "Rice Plain", price: 40, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 145, name: "Rice Chapati(2)", price: 60, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 146, name: "Rice Beans", price: 80, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 147, name: "Rice viazi", price: 80, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 148, name: "Rice Kamande", price: 90, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 149, name: "Rice Minji", price: 100, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 150, name: "Rice Matumbo", price: 110, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 151, name: "Rice Beef", price: 130, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 152, name: "Rice Kuku", price: 140, itemDeliveryFee: 5, image: "/api/placeholder/400/320" }
                ],
                "Pilau Dishes": [
                    { id: 153, name: "Pilau plain", price: 70, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 154, name: "Pilau Kamande", price: 110, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 155, name: "Pilau Matumbo", price: 120, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 156, name: "Pilau Beef", price: 140, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 157, name: "Pilau Kuku", price: 160, itemDeliveryFee: 5, image: "/api/placeholder/400/320" }
                ],
                "Ugali Dishes": [
                    { id: 158, name: "Ugali plain", price: 30, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 159, name: "Ugali Kienyeji", price: 80, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 160, name: "Ugali Sramble", price: 90, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 161, name: "Ugali Mix", price: 60, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 162, name: "Ugali Fried Eggs", price: 80, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 163, name: "Ugali Omena", price: 80, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 164, name: "Ugali Matumbo", price: 100, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 165, name: "Ugali Beef", price: 130, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 166, name: "Ugali Kuku", price: 140, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 167, name: "Ugali Minji", price: 90, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 168, name: "Ugali Samaki", price: 150, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 169, name: "Ugali Pambana", price: 100, itemDeliveryFee: 5, image: "/api/placeholder/400/320" }
                ],
               
                "Mukimo Dishes": [
                    { id: 170, name: "Mukimo plain", price: 60, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 171, name: "Mukimo Matumbo", price: 100, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 172, name: "Mukimo Beef", price: 130, itemDeliveryFee: 5, image: "/api/placeholder/400/320" }
                ],
                "Indomie Dishes": [
                    { id: 173, name: "Githeri Rasta", price: 80, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 174, name: "Indomie Beef Stew", price: 110, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 175, name: "Indomie Minji", price: 70, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 176, name: "Indomie Beans", price: 50, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 177, name: "Indomie Pilau", price: 90, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 178, name: "Indomie Rice", price: 70, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 179, name: "Indomie Kuku Special", price: 120, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 180, name: "Indomie Kachumbari", price: 40, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 181, name: "Indomie Jumbo Fried Eggs", price: 80, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 182, name: "Indomie Junior Fried Eggs", price: 60, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                ],
                "Additional Dishes": [
                    { id: 183, name: "Ndazi", price: 5, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 184, name: "Doughnut", price: 10, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 185, name: "Boiled Egg", price: 25, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 186, name: "Fried Egg", price: 35, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 187, name: "Beans Plain", price: 40, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 188, name: "Ndengu Plain", price: 30, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 189, name: "Mix Plain", price: 30, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 190, name: "Beef Plain", price: 100, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 191, name: "Minji Plain", price: 60, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 192, name: "Kamande Plain", price: 50, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 193, name: "Githeri", price: 60, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 194, name: "Matumbo Plain", price: 70, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 195, name: "Veges", price: 30, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 196, name: "Sukuma", price: 30, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 197, name: "Cabbage", price: 30, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 198, name: "Matoke Plain", price: 60, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 199, name: "Matoke Matumbo", price: 120, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 200, name: "Matoke Beef", price: 130, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 201, name: "Kuku", price: 100, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 202, name: "Samosa", price: 25, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 203, name: "Smokie", price: 35, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                ]
            },
            hashtag: {
                "Chapati Dishes": [
                    { id: 204, name: "Chapati", price: 10, itemDeliveryFee: 3, image: "/api/placeholder/400/320" },
                    { id: 205, name: "Chapati(2) Beans", price: 60, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 206, name: "Chapati(2) Ndengu", price: 60, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 207, name: "Chapati(2) Minji", price: 60, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 208, name: "Chapati(2) Matumbo", price: 90, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 209, name: "Chapati(2) Veges", price: 60, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 210, name: "Chapati(2) Managu", price: 80, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 211, name: "Chapati(2) Beef", price: 120, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 212, name: "Chapati(2) Kuku", price: 150, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 213, name: "Chapati(2) Scramble", price: 80, itemDeliveryFee: 5, image: "/api/placeholder/400/320" }
    
                ],
                "Rice Dishes": [
                    { id: 214, name: "Rice Plain", price: 40, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 215, name: "Rice Beans", price: 60, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 216, name: "Rice Ndengu", price: 60, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 217, name: "Rice Managu", price: 30, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 218, name: "Rice Veges", price: 60, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 219, name: "Rice Matoke", price: 80, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 220, name: "Rice Scrambled Egg", price: 90, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 221, name: "Rice Minji", price: 80, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 222, name: "Rice Matumbo", price: 90, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 223, name: "Rice Beef", price: 120, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 224, name: "Rice Kuku", price: 150, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 225, name: "Rice Viazi", price: 80, itemDeliveryFee: 5, image: "/api/placeholder/400/320" }
                ],
                "Pilau Dishes": [
                    { id: 226, name: "Pilau plain", price: 60, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 227, name: "Pilau Veges", price: 80, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 228, name: "Pilau Matumbo", price: 130, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 228, name: "Pilau Beef", price: 150, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 230, name: "Pilau Kuku", price: 180, itemDeliveryFee: 5, image: "/api/placeholder/400/320" }
                ],
                "Ugali Dishes": [
                    { id: 231, name: "Ugali plain", price: 30, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 232, name: "Ugali Minji", price: 80, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 233, name: "Ugali Veges", price: 60, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 234, name: "Ugali Managu", price: 70, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 235, name: "Ugali Mix", price: 60, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 236, name: "Ugali Scramble", price: 80, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 237, name: "Ugali Omena", price: 80, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 238, name: "Ugali Matumbo", price: 90, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 239, name: "Ugali Beef", price: 120, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 240, name: "Ugali Kuku", price: 150, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 241, name: "Ugali Ndengu", price: 60, itemDeliveryFee: 5, image: "/api/placeholder/400/320" }
                ],
                "Githeri Dishes": [
                    { id: 242, name: "Githeri plain", price: 60, itemDeliveryFee: 5, image: "/api/placeholder/400/320" }, 
                    { id: 243, name: "Githeri Rice", price: 70, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 244, name: "Githeri Matumbo", price: 80, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 245, name: "Githeri Beef", price: 130, itemDeliveryFee: 5, image: "/api/placeholder/400/320" }
                ],
                "Matoke Dishes": [
                    { id: 246, name: "Matoke Plain", price: 60, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 247, name: "Matoke Matumbo", price: 110, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 248, name: "Matoke Beef", price: 130, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 249, name: "Matoke Kuku", price: 160, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
            ],
                "Additional Dishes": [
                    { id: 250, name: "Ndazi", price: 10, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 251, name: "Omelette", price: 80, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 252, name: "Fried Eggs", price: 60, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 253, name: "Beans Plain", price: 40, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 254, name: "Ndengu Plain", price: 40, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 255, name: "Kuku Plain", price: 120, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 256, name: "Matumbo Plain", price: 70, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 257, name: "Beef Plain", price: 90, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 258, name: "Minji Plain", price: 60, itemDeliveryFee: 5, image: "/api/placeholder/400/320" }
                ]
            },
            blessed: {
                "Chapati Dishes": [
                    { id: 259, name: "Chapati", price: 10, itemDeliveryFee: 3, image: "/api/placeholder/400/320" },
                    { id: 260, name: "Chapati(2) Beans", price: 60, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 261, name: "Chapati(2) Ndengu", price: 60, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 262, name: "Minji Waru Chapati(2)", price: 60, itemDeliveryFee: 5, image: "/api/placeholder/400/320" }
                ],
                "Rice Dishes": [
                   
                    { id: 263, name: "Rice Beans", price: 50, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 264, name: "Rice Ndengu", price: 50, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                
                ],
                "Pilau Dishes": [
                    { id: 265, name: "Pilau plain", price: 70, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },      
                    { id: 266, name: "Pilau Beef", price: 140, itemDeliveryFee: 5, image: "/api/placeholder/400/320" }
                ],
                "Ugali Dishes": [
                    { id: 267, name: "Ugali Mix", price: 50, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 268, name: "Ugali Nyama Fry", price: 150, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 269, name: "Ugali Matumbo Supu", price: 80, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 270, name: "Ugali Matumbo Fry Harara", price: 120, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 271, name: "Ugali Kuku Fry", price: 130, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 272, name: "Ugali Omena Fry HawHaw", price: 70, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 273, name: "Ugali Omena Supu", price: 60, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 274, name: "Ugali Wiu/Fulu", price: 90, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 275, name: "Ugali Mlima/Pambana", price: 70, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 276, name: "Ugali Macho", price: 70, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 277, name: "Ugali Mbuta", price: 100, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 278, name: "Ugali Maini Kuku & Gizzards", price: 70, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 279, name: "Ugali Maini Ng'ombe", price: 150, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 280, name: "Ugali Pork", price: 150, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 281, name: "Ugali Mlima Pork", price: 100, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 282, name: "Ugali Tilapia", price: 150, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 283, name: "Ugali Balls", price: 100, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 284, name: "Ugali Mboga Kienyeji", price: 60, itemDeliveryFee: 5, image: "/api/placeholder/400/320" }
                    
                ],
                "Githeri Dishes": [
                    { id: 285, name: "Githeri ", price: 60, itemDeliveryFee: 5, image: "/api/placeholder/400/320" }
                    
                ],

                "Additional Dishes": [
                    { id: 286, name: "Andazi", price: 10, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 287, name: "Viazi Karai", price: 10, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 288, name: "Boiled Egg", price: 25, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 289, name: "Ndizi Karai", price: 10, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 290, name: "Omena supu Alenya", price: 100, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 291, name: "Akuoga Alenya", price: 100, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 292, name: "Mboga Kienyeji", price: 70, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 293, name: "Akuoga", price: 70, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 294, name: "Managu", price: 70, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 295, name: "Samaki", price: 100, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 296, name: "Gizzard ya Kuku", price: 70, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 297, name: "Maini ya Kuku", price: 70, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 298, name: "Maini", price: 150, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 299, name: "Pork Bone", price: 100, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 300, name: "Pork Mlima", price: 100, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 301, name: "Matumbo Fry Harara", price: 120, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 302, name: "Pork Fry", price: 150, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 303, name: "Nyama Fry", price: 150, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 304, name: "Maini Fry Ng'ombe", price: 150, itemDeliveryFee: 5, image: "/api/placeholder/400/320" }
                ]
            },
            masaaikitchen: {
                "Chapati Dishes": [
                    { id: 305, name: "Chapati", price: 15, itemDeliveryFee: 3, image: "/api/placeholder/400/320" },
                    { id: 306, name: "Chapati(2) Beans", price: 70, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 307, name: "Chapati(2) Ndengu", price: 70, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 308, name: "Chapati(2) Minji", price: 100, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 309, name: "Chapati(2) Matumbo", price: 100, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 310, name: "Chapati(2) Beef", price: 130, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    {id: 311, name: "Chapati(2) Cabbage", price: 60, itemDeliveryFee: 5, image: "/api/placeholder/400/320" }
    
                    
                ],
                "Rice Dishes": [
                    { id: 312, name: "Rice Plain", price: 50, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 313, name: "Rice Beans", price: 80, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 314, name: "Rice Ndengu", price: 80, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 315, name: "Rice Matumbo", price: 100, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 316, name: "Rice Beef", price: 130, itemDeliveryFee: 5, image: "/api/placeholder/400/320" }
                ],
                "Pilau Dishes": [
                    { id: 317, name: "Pilau plain", price: 100, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 318, name: "Pilau Nyama", price: 150, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                ],
                "Ugali Dishes": [
                    { id: 319, name: "Ugali plain", price: 40, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 320, name: "Ugali Mayai", price: 120, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 321, name: "Ugali Matumbo", price: 100, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 322, name: "Ugali Beef", price: 130, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 323, name: "Ugali Veges", price: 60, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 324, name: "Ugali Omena", price: 80, itemDeliveryFee: 5, image: "/api/placeholder/400/320" }
                ],
               

                "Indomie Dishes": [
                    { id: 325, name: "Indomie Githeri Rasta", price: 100, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 326, name: "Indomie Beef", price: 110, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 327, name: "Indomie Minji", price: 100, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 328, name: "Indomie Plain Jumbo", price: 60, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 329, name: "Indomie Plain Junior", price: 40, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 330, name: "Indomie Wrap", price: 50, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 331, name: "Indomie Ndengu", price: 60, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 332, name: "Indomie Beans", price: 60, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 333, name: "Indomie Eggs", price: 100, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                ],

                "Additional Dishes": [
                    { id: 334, name: "Nyama Plain", price: 100, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 335, name: "Matumbo Plain", price: 70, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 336, name: "Fried Egg(2)", price: 60, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 337, name: "Beans Plain", price: 40, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 338, name: "Ndengu Plain", price: 40, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                   
                ]
            },
            hotgrill: {
                "Chapati Dishes": [
                    { id: 339, name: "Chapati", price: 10, itemDeliveryFee: 3, image: "/api/placeholder/400/320" },
                    { id: 340, name: "Chapati", price: 20, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    
                ],
                "Rice Dishes": [
                    { id: 341, name: "Rice Plain", price: 30, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 342, name: "Rice Beans", price: 60, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 343, name: "Rice Ndengu", price: 60, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 344, name: "Rice Matumbo", price: 100, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 345, name: "Rice Beef", price: 120, itemDeliveryFee: 5, image: "/api/placeholder/400/320" }
                ],
                "Pilau Dishes": [
                    { id: 346, name: "Pilau plain", price: 60, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 347, name: "Pilau Fried Matumbo", price: 150, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 348, name: "Pilau Matumbo", price: 130, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 349, name: "Pilau Beef", price: 80, itemDeliveryFee: 5, image: "/api/placeholder/400/320" }
                ],
                "Ugali Dishes": [
                    { id: 350, name: "Ugali plain", price: 30, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 351, name: "Ugali Greens", price: 50, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 352, name: "Ugali Stewed Ugali", price: 120, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 353, name: "Ugali Fried Beef", price: 130, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 354, name: "Ugali Fried Egg(2)", price: 90, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 355, name: "Ugali Scrambled Egg(2)", price: 90, itemDeliveryFee: 5, image: "/api/placeholder/400/320" }
                   
                ],
               
              
                "Additional Dishes": [
                    { id: 356, name: "Andazi", price: 10, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 357, name: "Samosa Ndengu", price: 10, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 358, name: "Fried Egg(2)", price: 60, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 359, name: "Yellow Beans", price: 40, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 360, name: "Ndengu Plain", price: 30, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 361, name: "Green", price: 40, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 362, name: "Omena", price: 40, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 363, name: "Beef Plain", price: 90, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 364, name: "Matumbo Plain", price: 70, itemDeliveryFee: 5, image: "/api/placeholder/400/320" }
            ]
            },
            faithhotel: {
                "Chapati Dishes": [
                
                    { id: 365, name: "Chapati", price: 20, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 366, name: "Chapati(2) Beans", price: 70, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 367, name: "Chapati(2) Ndengu", price: 70, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    
                ],
                "Rice Dishes": [
                
                    { id: 368, name: "Rice Beans", price: 60, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 369, name: "Rice Ndengu", price: 60, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 370, name: "Rice Nyama", price: 130, itemDeliveryFee: 5, image: "/api/placeholder/400/320" }

                    
                ],
                
                "Ugali Dishes": [
                    { id: 371, name: "Ugali Nyama", price: 120, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 372, name: "Ugali Kuku", price: 150, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 373, name: "Ugali Matumbo", price: 120, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 374, name: "Ugali Mboga", price: 60, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 375, name: "Ugali Mayai(2) Fried", price: 80, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 376, name: "Ugali Omena Fried", price: 70, itemDeliveryFee: 5, image: "/api/placeholder/400/320" }
                   
                ],
               
              
                "Additional Dishes": [
                    { id: 377, name: "Matoke", price: 50, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 378, name: "Chips Plain", price: 70, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    { id: 379, name: "Chips Kuku", price: 170, itemDeliveryFee: 5, image: "/api/placeholder/400/320" },
                    
            ]
            
            },
            Winners: {
                "Beverages": [
                    { id: 74, name: "Coffee", price: 350, itemDeliveryFee: 20, image: "/api/placeholder/400/320" }
                ]
            },
          
            
        };

        const locations = [
            { zone: "Nyayo Zone ", halls: ["Nyayo 1", "Nyayo 2", "Nyayo 3", "Nyayo 4", "Nyayo 5", "Nyayo 6"], deliveryFee: 30, estTime: "20 mins" },
            { zone: "Nyandarua Zone", halls: ["Nyandarua 1", "Nyandarua 2", "Nyandarua 3", "Nyandarua 4"], deliveryFee: 50, estTime: "20 mins" },
            { zone: "Mfumbiro zone", halls: ["Mfumbiro 1", "Mfumbiro 2", "Mfumbiro 3"], deliveryFee: 70, estTime: "25 mins" },
            { zone: "Kahawa Sukari", halls: ["Kahawa Sukari"], deliveryFee: 30, estTime: "20-40 mins" },
            { zone: "Kahawa Wendani", halls: ["Wendani"], deliveryFee: 50, estTime: "20-40 mins" },
            { zone: "KM", halls: ["KM"], deliveryFee: 70, estTime: "25 mins" }
        ];

        let cart = JSON.parse(localStorage.getItem('cart')) || [];
        let selectedDeliveryFee = parseInt(localStorage.getItem('deliveryFee')) || 0;
        let selectedHall = localStorage.getItem('selectedHall') || "";
        let userProfile = JSON.parse(localStorage.getItem('userProfile')) || { phone: "" };
        let expandedCategory = null;
        let currentRestaurantId = null;
        let currentDishId = null;
        let currentCategory = null;
        let currentView = 'restaurantGrid'; // Track current view for navigation
// Define the page hierarchy order (from deepest to shallowest)
const pageHierarchy = [
    'orderConfirmation',
    'cart',
    'dishDetail',
    'restaurantMenu',
    'restaurantGrid'
];

// Track navigation stack
let navigationStack = [currentView]; // Initialize with the starting view

        function calculateTotal(basePrice, itemDeliveryFee, locationDeliveryFee, quantity) {
            const basePlusItem = basePrice + itemDeliveryFee;
            return quantity === 1 ? basePlusItem + locationDeliveryFee : (basePlusItem * quantity) + locationDeliveryFee;
        }

        function updateCartBadge() {
            const badge = document.querySelector('.cart-badge');
            if (badge) badge.textContent = cart.length;
        }

        // Navigation state management
        function pushState(view, data = {}) {
            currentView = view;
            history.pushState({ view, ...data }, '', `#${view}`);
        }
        window.addEventListener('popstate', (event) => {
    const state = event.state || { view: 'restaurantGrid' };
    const view = state.view;

    // Sync navigation stack
    if (navigationStack[navigationStack.length - 1] !== view) {
        navigationStack.push(view); // Forward navigation
    } else {
        navigationStack.pop(); // Back navigation
    }
    currentView = view;

    // Render the view with state data
    if (view === 'restaurantGrid') {
        showRestaurantGrid();
    } else if (view === 'restaurantMenu') {
        showRestaurantMenu(state.id);
    } else if (view === 'dishDetail') {
        showDishDetail(state.id, state.restaurantId, state.category);
    } else if (view === 'cart') {
        showCart();
    } else if (view === 'orderConfirmation') {
        showOrderConfirmation(state.order);
    }
});
        function showRestaurantGrid() {
            const mainContent = document.getElementById('mainContent');
            mainContent.innerHTML = `
                <div class="home-banner">
                    <img src="/images/school_food.jpg" alt="School Food Banner" class="banner-image" loading="lazy">
                    <div class="banner-overlay">
                        <h2 class="banner-title">Welcome to Your Food Haven</h2>
                    </div>
                </div>
                <div class="navigation-bar">
                    <button class="back-btn" style="visibility: hidden;" aria-label="Go back"><i class="fas fa-arrow-left"></i></button>
                    <div class="search-wrapper">
                        <div class="search-container">
                            <input type="text" class="search-input" placeholder="Search restaurants..." onkeyup="searchRestaurants(this.value)">
                            <i class="fas fa-search search-icon"></i>
                        </div>
                    </div>
                    <button class="cart-btn" onclick="navigateTo('cart')" aria-label="View cart"><i class="fas fa-shopping-cart"></i><span class="cart-badge">${cart.length}</span></button>
                </div>
                <div class="restaurant-grid">
                    ${restaurants.map(restaurant => `
                        <div class="restaurant-item" tabindex="0" onclick="navigateTo('restaurantMenu', { id: ${restaurant.id} })" onkeydown="if(event.key === 'Enter') navigateTo('restaurantMenu', { id: ${restaurant.id} })">
                            <div class="restaurant-image-container">
                                <img src="${restaurant.image}" alt="${restaurant.name}" class="restaurant-image" loading="lazy">
                            </div>
                            <div class="restaurant-info">
                                <h3 class="restaurant-name">${restaurant.name}</h3>
                                <div class="restaurant-rating">
                                    <i class="fas fa-star"></i>
                                    <span>${restaurant.rating}</span>
                                </div>
                            </div>
                        </div>
                    `).join('')}
                </div>
            `;
            pushState('restaurantGrid');
        }

        function showRestaurantMenu(restaurantId) {
            currentRestaurantId = restaurantId;
            const restaurant = restaurants.find(r => r.id === restaurantId);
            if (!restaurant) return;
            const restaurantKey = restaurant.name.toLowerCase().replace(/\s+/g, '');
            const mainContent = document.getElementById('mainContent');
            const locationText = selectedHall ? `Current Location: ${selectedHall}` : "Add Your Address";

            mainContent.innerHTML = `
                <div class="menu-view">
                    <div class="navigation-bar">
                        <button class="back-btn" onclick="navigateBack()" aria-label="Back to restaurants"><i class="fas fa-arrow-left"></i></button>
                        <div class="search-wrapper">
                            <div class="search-container">
                                <input type="text" class="search-input" placeholder="Search menu items..." onkeyup="searchMenuItems(this.value, '${restaurantKey}')">
                                <i class="fas fa-search search-icon"></i>
                            </div>
                        </div>
                        <button class="cart-btn" onclick="navigateTo('cart')" aria-label="View cart"><i class="fas fa-shopping-cart"></i><span class="cart-badge">${cart.length}</span></button>
                    </div>
                    <div class="restaurant-banner">
                        <img src="${restaurant.image}" alt="${restaurant.name}" class="banner-image" loading="lazy">
                        <div class="banner-overlay">
                            <h2 class="banner-title">${restaurant.name}</h2>
                            <div class="restaurant-rating">
                                <i class="fas fa-star"></i>
                                <span>${restaurant.rating}</span>
                            </div>
                        </div>
                    </div>
                    <div class="location-wrapper">
                        <div class="location-container">
                            <label for="location"><i class="fas fa-map-pin"></i> Set Your Location:</label>
                            <select id="location" onchange="updateDishPrices(this.value, ${restaurantId}, this.options[this.selectedIndex].text, 'menu')">
                                <option value="0" ${selectedDeliveryFee === 0 ? 'selected' : ''}>${selectedHall ? locationText : 'View Base Prices'}</option>
                                ${locations.map(zone => `
                                    <optgroup label="${zone.zone}">
                                        ${zone.halls.map(hall => `
                                            <option value="${zone.deliveryFee}" ${selectedHall === hall ? 'selected' : ''}>${hall}</option>
                                        `).join('')}
                                    </optgroup>
                                `).join('')}
                            </select>
                            <button class="location-button" onclick="openLocationModal(${restaurantId}, 'menu')">${locationText}</button>
                            <span class="location-hint">${selectedDeliveryFee === 0 ? 'Set location for full pricing' : `Delivery to ${selectedHall} in ${locations.find(z => z.halls.includes(selectedHall))?.estTime || 'Unknown time'}`}</span>
                        </div>
                    </div>
                    <div id="menuContent">
                        ${renderMenu(restaurantKey, selectedDeliveryFee)}
                    </div>
                </div>
            `;
            pushState('restaurantMenu', { id: restaurantId });
        }

        function openLocationModal(restaurantId, context) {
            const modal = document.getElementById('locationModal');
            const optionsDiv = document.getElementById('locationOptions');
            optionsDiv.innerHTML = `
                <div class="zone-group">
                    <div class="zone-title">Base Prices</div>
                    <div class="hall-option" onclick="updateDishPrices(0, ${restaurantId}, 'View Base Prices', '${context}'); closeLocationModal()">View Base Prices</div>
                </div>
                ${locations.map(zone => `
                    <div class="zone-group">
                        <div class="zone-title">${zone.zone}</div>
                        ${zone.halls.map(hall => `
                            <div class="hall-option" onclick="updateDishPrices(${zone.deliveryFee}, ${restaurantId}, '${hall}', '${context}'); closeLocationModal()">${hall}</div>
                        `).join('')}
                    </div>
                `).join('')}
            `;
            modal.style.display = 'flex';
            document.body.classList.add('no-scroll');
            // Do not focus the search input automatically
        }

        function closeLocationModal() {
            const modal = document.getElementById('locationModal');
            modal.style.display = 'none';
            document.body.classList.remove('no-scroll');
        }

        function filterLocations(searchTerm) {
            const optionsDiv = document.getElementById('locationOptions');
            const search = searchTerm.toLowerCase();
            optionsDiv.innerHTML = `
                <div class="zone-group">
                    <div class="zone-title">Base Prices</div>
                    <div class="hall-option" onclick="updateDishPrices(0, ${currentRestaurantId}, 'View Base Prices', 'menu'); closeLocationModal()">View Base Prices</div>
                </div>
                ${locations.map(zone => {
                    const filteredHalls = zone.halls.filter(hall => hall.toLowerCase().includes(search) || zone.zone.toLowerCase().includes(search));
                    return filteredHalls.length > 0 ? `
                        <div class="zone-group">
                            <div class="zone-title">${zone.zone}</div>
                            ${filteredHalls.map(hall => `
                                <div class="hall-option" onclick="updateDishPrices(${zone.deliveryFee}, ${currentRestaurantId}, '${hall}', 'menu'); closeLocationModal()">${hall}</div>
                            `).join('')}
                        </div>
                    ` : '';
                }).join('')}
            `;
        }

        function toggleCategory(restaurantKey, category, deliveryFee) {
            expandedCategory = expandedCategory === category ? null : category;
            const menuContent = document.getElementById('menuContent');
            menuContent.innerHTML = renderMenu(restaurantKey, deliveryFee);
        }

        function renderMenu(restaurantKey, deliveryFee) {
            return Object.keys(dishes[restaurantKey] || {}).map(category => `
                <div class="category-section">
                    <div class="category-header">
                        <h3 class="category-title">${category}</h3>
                        <button class="see-more-btn" onclick="toggleCategory('${restaurantKey}', '${category}', ${deliveryFee})">
                            ${expandedCategory === category ? 'See Less' : 'See More'}
                        </button>
                    </div>
                    <div class="${expandedCategory === category ? 'dishes-expanded' : 'dishes-grid'}">
                        ${dishes[restaurantKey][category].map(dish => `
                            <div class="dish-wrapper" tabindex="0" onclick="navigateTo('dishDetail', { id: ${dish.id}, restaurantId: ${restaurants.find(r => r.name.toLowerCase().replace(/\s+/g, '') === restaurantKey).id}, category: '${category}' })">
                                <div class="dish-item">
                                    <img src="${dish.image}" alt="${dish.name}" class="dish-image" loading="lazy">
                                    <button class="add-button" onclick="event.stopPropagation(); addToCart(${dish.id}, ${restaurants.find(r => r.name.toLowerCase().replace(/\s+/g, '') === restaurantKey).id}, '${category}', 1)">+</button>
                                </div>
                                <div class="dish-info">
                                    <h4 class="dish-name">${dish.name}</h4>
                                    <span class="dish-price">KES ${deliveryFee === 0 ? dish.price : dish.price + dish.itemDeliveryFee + deliveryFee}</span>
                                </div>
                            </div>
                        `).join('')}
                    </div>
                </div>
            `).join('');
        }

        function searchRestaurants(searchTerm) {
            const filteredRestaurants = restaurants.filter(r => r.name.toLowerCase().includes(searchTerm.toLowerCase()));
            const restaurantGrid = document.querySelector('.restaurant-grid');
            restaurantGrid.innerHTML = filteredRestaurants.map(restaurant => `
                <div class="restaurant-item" tabindex="0" onclick="navigateTo('restaurantMenu', { id: ${restaurant.id} })" onkeydown="if(event.key === 'Enter') navigateTo('restaurantMenu', { id: ${restaurant.id} })">
                    <div class="restaurant-image-container">
                        <img src="${restaurant.image}" alt="${restaurant.name}" class="restaurant-image" loading="lazy">
                    </div>
                    <div class="restaurant-info">
                        <h3 class="restaurant-name">${restaurant.name}</h3>
                        <div class="restaurant-rating">
                            <i class="fas fa-star"></i>
                            <span>${restaurant.rating}</span>
                        </div>
                    </div>
                </div>
            `).join('');
        }

        function searchMenuItems(searchTerm, restaurantKey) {
            const filteredCategories = {};
            Object.keys(dishes[restaurantKey]).forEach(category => {
                const filteredDishes = dishes[restaurantKey][category].filter(dish => dish.name.toLowerCase().includes(searchTerm.toLowerCase()));
                if (filteredDishes.length > 0) filteredCategories[category] = filteredDishes;
            });
            const menuContent = document.getElementById('menuContent');
            menuContent.innerHTML = Object.keys(filteredCategories).map(category => `
                <div class="category-section">
                    <div class="category-header">
                        <h3 class="category-title">${category}</h3>
                        <button class="see-more-btn" onclick="toggleCategory('${restaurantKey}', '${category}', ${selectedDeliveryFee})">${expandedCategory === category ? 'See Less' : 'See More'}</button>
                    </div>
                    <div class="${expandedCategory === category ? 'dishes-expanded' : 'dishes-grid'}">
                        ${filteredCategories[category].map(dish => `
                            <div class="dish-wrapper" tabindex="0" onclick="navigateTo('dishDetail', { id: ${dish.id}, restaurantId: ${restaurants.find(r => r.name.toLowerCase().replace(/\s+/g, '') === restaurantKey).id}, category: '${category}' })">
                                <div class="dish-item">
                                    <img src="${dish.image}" alt="${dish.name}" class="dish-image" loading="lazy">
                                    <button class="add-button" onclick="event.stopPropagation(); addToCart(${dish.id}, ${restaurants.find(r => r.name.toLowerCase().replace(/\s+/g, '') === restaurantKey).id}, '${category}', 1)">+</button>
                                </div>
                                <div class="dish-info">
                                    <h4 class="dish-name">${dish.name}</h4>
                                    <span class="dish-price">KES ${selectedDeliveryFee === 0 ? dish.price : dish.price + dish.itemDeliveryFee + selectedDeliveryFee}</span>
                                </div>
                            </div>
                        `).join('')}
                    </div>
                </div>
            `).join('');
        }

        function updateDishPrices(deliveryFee, restaurantId, hallName, context) {
            selectedDeliveryFee = parseInt(deliveryFee) || 0;
            selectedHall = hallName === 'View Base Prices' ? '' : hallName;
            localStorage.setItem('deliveryFee', selectedDeliveryFee);
            localStorage.setItem('selectedHall', selectedHall);
            if (context === 'menu') showRestaurantMenu(restaurantId);
            else if (context === 'order') showDishDetail(currentDishId, restaurantId, currentCategory);
            else if (context === 'cart') showCart();
        }

        function showDishDetail(dishId, restaurantId, category) {
            currentDishId = dishId;
            currentCategory = category;
            const restaurant = restaurants.find(r => r.id === restaurantId);
            const restaurantKey = restaurant.name.toLowerCase().replace(/\s+/g, '');
            const dish = dishes[restaurantKey][category].find(d => d.id === dishId);
            const mainContent = document.getElementById('mainContent');
            const locationText = selectedHall ? `Current Location: ${selectedHall}` : "Add Your Address";
            const isLocationSet = selectedDeliveryFee !== 0;
            const totalPrice = isLocationSet ? calculateTotal(dish.price, dish.itemDeliveryFee, selectedDeliveryFee, 1) : dish.price;

            mainContent.innerHTML = `
                <div class="menu-view">
                    <div class="navigation-bar">
                        <button class="back-btn" onclick="navigateBack()" aria-label="Back to menu"><i class="fas fa-arrow-left"></i></button>
                        <div class="search-wrapper">
                            <div class="search-container">
                                <input type="text" class="search-input" placeholder="Search ${category} items..." onkeyup="searchCategorySuggestions(this.value, '${restaurantKey}', '${category}', ${dish.id}, ${restaurantId})">
                                <i class="fas fa-search search-icon"></i>
                            </div>
                        </div>
                        <button class="cart-btn" onclick="navigateTo('cart')" aria-label="View cart"><i class="fas fa-shopping-cart"></i><span class="cart-badge">${cart.length}</span></button>
                    </div>
                    <div style="background: white; padding: 20px; border-radius: 10px;">
                        <img src="${dish.image}" alt="${dish.name}" style="width: 100%; height: 300px; object-fit: cover; border-radius: 10px;" loading="lazy">
                        <h2 style="margin: 20px 0;">${dish.name}</h2>
                        <div style="margin: 20px 0;">
                            <p>Total Price: <span id="totalPrice">${isLocationSet ? `KES ${totalPrice}` : 'Select location for full price'}</span></p>
                            <div class="location-wrapper">
                                <div class="location-container">
                                    <label for="location"><i class="fas fa-map-pin"></i> Select Your Location${isLocationSet ? ' (Optional)' : ''}:</label>
                                    <select id="location" onchange="updateDishPrices(this.value, ${restaurantId}, this.options[this.selectedIndex].text, 'order')">
                                        <option value="0" ${selectedDeliveryFee === 0 ? 'selected' : ''}>${selectedHall ? locationText : 'View Base Prices'}</option>
                                        ${locations.map(zone => `
                                            <optgroup label="${zone.zone}">
                                                ${zone.halls.map(hall => `
                                                    <option value="${zone.deliveryFee}" ${selectedHall === hall ? 'selected' : ''}>${hall}</option>
                                                `).join('')}
                                            </optgroup>
                                        `).join('')}
                                    </select>
                                    <button class="location-button" onclick="openLocationModal(${restaurantId}, 'order')">${locationText}</button>
                                    <span class="location-hint">${selectedDeliveryFee === 0 ? 'Set location for full pricing' : `Delivery in ${locations.find(z => z.halls.includes(selectedHall))?.estTime || 'Unknown time'}`}</span>
                                </div>
                            </div>
                            <div class="quantity-wrapper">
                                <label for="quantity">Quantity:</label>
                                <button class="quantity-btn" onclick="updateQuantity(-1, ${dish.price}, ${dish.itemDeliveryFee}, ${selectedDeliveryFee}, ${dish.id}, ${restaurantId}, '${category}')">-</button>
                                <span id="quantity" class="quantity-display">1</span>
                                <button class="quantity-btn" onclick="updateQuantity(1, ${dish.price}, ${dish.itemDeliveryFee}, ${selectedDeliveryFee}, ${dish.id}, ${restaurantId}, '${category}')">+</button>
                            </div>
                            <label for="phone">Phone Number:</label>
                            <input type="tel" id="phone" value="${userProfile.phone}" placeholder="e.g., 0712345678" style="width: 100%; padding: 10px; margin-top: 10px; border: 1px solid #e0e0e0; border-radius: 5px;">
                        </div>
                    </div>
                    <div class="button-container">
                        <button class="fixed-order-btn" onclick="addToCart(${dish.id}, ${restaurantId}, '${category}', parseInt(document.getElementById('quantity').textContent))">Add to Cart</button>
                    </div>
                    <div id="categorySuggestions" class="category-suggestions">
                        ${dishes[restaurantKey][category].filter(d => d.id !== dishId).map(item => `
                            <div class="dish-wrapper" tabindex="0" onclick="navigateTo('dishDetail', { id: ${item.id}, restaurantId: ${restaurantId}, category: '${category}' })">
                                <div class="dish-item">
                                    <img src="${item.image}" alt="${item.name}" class="dish-image" loading="lazy">
                                    <button class="add-button" onclick="event.stopPropagation(); addToCart(${item.id}, ${restaurantId}, '${category}', 1)">+</button>
                                </div>
                                <div class="dish-info">
                                    <h4 class="dish-name">${item.name}</h4>
                                    <span class="dish-price">KES ${selectedDeliveryFee === 0 ? item.price : item.price + item.itemDeliveryFee + selectedDeliveryFee}</span>
                                </div>
                            </div>
                        `).join('')}
                    </div>
                </div>
            `;
            pushState('dishDetail', { id: dishId, restaurantId, category });
        }

        function updateQuantity(change, basePrice, itemDeliveryFee, locationDeliveryFee, dishId, restaurantId, category) {
            const quantityElement = document.getElementById('quantity');
            let quantity = parseInt(quantityElement.textContent);
            quantity = Math.max(1, Math.min(30, quantity + change));
            quantityElement.textContent = quantity;
            if (locationDeliveryFee !== 0) {
                const total = calculateTotal(basePrice, itemDeliveryFee, locationDeliveryFee, quantity);
                document.getElementById('totalPrice').textContent = `KES ${total}`;
            }
        }

        function searchCategorySuggestions(searchTerm, restaurantKey, category, currentDishId, restaurantId) {
            const filteredItems = dishes[restaurantKey][category].filter(dish => 
                dish.id !== currentDishId && dish.name.toLowerCase().includes(searchTerm.toLowerCase()));
            const suggestionsDiv = document.getElementById('categorySuggestions');
            suggestionsDiv.innerHTML = filteredItems.map(item => `
                <div class="dish-wrapper" tabindex="0" onclick="navigateTo('dishDetail', { id: ${item.id}, restaurantId: ${restaurantId}, category: '${category}' })">
                    <div class="dish-item">
                        <img src="${item.image}" alt="${item.name}" class="dish-image" loading="lazy">
                        <button class="add-button" onclick="event.stopPropagation(); addToCart(${item.id}, ${restaurantId}, '${category}', 1)">+</button>
                    </div>
                    <div class="dish-info">
                        <h4 class="dish-name">${item.name}</h4>
                        <span class="dish-price">KES ${selectedDeliveryFee === 0 ? item.price : item.price + item.itemDeliveryFee + selectedDeliveryFee}</span>
                    </div>
                </div>
            `).join('');
        }

        function showNotification(title, message, isError = false) {
            const modal = document.getElementById('notificationModal');
            const titleElement = document.getElementById('notificationTitle');
            const messageElement = document.getElementById('notificationMessage');
            const content = document.getElementById('notificationContent');

            titleElement.textContent = title;
            messageElement.textContent = message;
            if (isError) content.classList.add('notification-error');
            else content.classList.remove('notification-error');

            modal.style.display = 'flex';
            document.body.classList.add('no-scroll');

            if (!isError) setTimeout(closeNotification, 3000);
        }

        function closeNotification() {
            const modal = document.getElementById('notificationModal');
            modal.style.display = 'none';
            document.body.classList.remove('no-scroll');
        }

        function addToCart(dishId, restaurantId, category, quantity) {
            const restaurantKey = restaurants.find(r => r.id === restaurantId).name.toLowerCase().replace(/\s+/g, '');
            const dish = dishes[restaurantKey][category].find(d => d.id === dishId);
            cart.push({ ...dish, restaurantId, quantity });
            localStorage.setItem('cart', JSON.stringify(cart));
            updateCartBadge();
            showNotification('Added to Cart', `${dish.name} (x${quantity}) has been added to your cart!`);
            navigateTo('restaurantMenu', { id: restaurantId });
        }

        function showCart() {
            const mainContent = document.getElementById('mainContent');
            const total = cart.reduce((sum, item) => sum + calculateTotal(item.price, item.itemDeliveryFee, selectedDeliveryFee, item.quantity), 0);
            const locationText = selectedHall ? `Current Location: ${selectedHall}` : "Add Your Address";
            const isLocationSet = selectedDeliveryFee !== 0;

            mainContent.innerHTML = `
                <div class="menu-view">
                    <div class="navigation-bar">
                        <button class="back-btn" onclick="navigateBack()" aria-label="Back to restaurants"><i class="fas fa-arrow-left"></i></button>
                        <div class="search-wrapper"></div>
                        <button class="cart-btn" onclick="navigateTo('cart')" aria-label="View cart"><i class="fas fa-shopping-cart"></i><span class="cart-badge">${cart.length}</span></button>
                    </div>
                    <h2 style="margin-bottom: 20px;">Your Cart</h2>
                    ${cart.length === 0 ? '<p>Your cart is empty.</p>' : `
                        <div style="background: white; padding: 20px; border-radius: 10px; margin-bottom: 20px;">
                            ${cart.map((item, index) => `
                                <div style="display: flex; justify-content: space-between; align-items: center; padding: 10px 0; border-bottom: 1px solid #e0e0e0;">
                                    <div>
                                        <h4>${item.name} (x${item.quantity})</h4>
                                        <p class="cart-item-price">KES ${isLocationSet ? calculateTotal(item.price, item.itemDeliveryFee, selectedDeliveryFee, item.quantity) : item.price * item.quantity}</p>
                                        ${!isLocationSet ? '<p class="cart-location-notice">Add your location to include delivery fees</p>' : ''}
                                    </div>
                                    <button onclick="removeFromCart(${index})" style="background: #ff4444; color: white; border: none; padding: 5px 10px; border-radius: 5px;">Remove</button>
                                </div>
                            `).join('')}
                            <p style="margin-top: 20px;">Total: KES ${total}</p>
                            <div class="location-wrapper">
                                <div class="location-container">
                                    <label for="location"><i class="fas fa-map-pin"></i> Delivery Location${selectedHall ? ' (Optional)' : ' (Required)'}:</label>
                                    <select id="location" onchange="updateDishPrices(this.value, null, this.options[this.selectedIndex].text, 'cart')">
                                        <option value="0" ${selectedDeliveryFee === 0 ? 'selected' : ''}>${selectedHall ? locationText : 'View Base Prices'}</option>
                                        ${locations.map(zone => `
                                            <optgroup label="${zone.zone}">
                                                ${zone.halls.map(hall => `
                                                    <option value="${zone.deliveryFee}" ${selectedHall === hall ? 'selected' : ''}>${hall}</option>
                                                `).join('')}
                                            </optgroup>
                                        `).join('')}
                                    </select>
                                    <button class="location-button" onclick="openLocationModal(null, 'cart')">${locationText}</button>
                                    <span class="location-hint">${selectedDeliveryFee === 0 ? 'Set location to order' : `Delivery in ${locations.find(z => z.halls.includes(selectedHall))?.estTime || 'Unknown time'}`}</span>
                                </div>
                            </div>
                            <label for="schedule">Schedule Delivery:</label>
                            <div class="custom-dropdown">
                                <div class="dropdown-selected" id="dropdownSelected">Now</div>
                                <div class="dropdown-menu" id="dropdownMenu">
                                    <div class="dropdown-option" onclick="selectSchedule('now')">Now</div>
                                    <div class="dropdown-option" onclick="selectSchedule('12pm')">Lunch (12 PM)</div>
                                    <div class="dropdown-option" onclick="selectSchedule('6pm')">Dinner (6 PM)</div>
                                </div>
                            </div>
                            <input type="hidden" id="schedule" value="now">
                            <label for="phone">Phone Number:</label>
                            <input type="tel" id="phone" value="${userProfile.phone}" placeholder="e.g., 0712345678" style="width: 100%; padding: 10px; margin: 10px 0; border: 1px solid #e0e0e0; border-radius: 5px;">
                            <button id="placeOrderBtn" style="width: 100%; padding: 15px; background: ${selectedDeliveryFee === 0 ? '#cccccc' : '#9b59b6'}; color: white; border: none; border-radius: 5px; cursor: ${selectedDeliveryFee === 0 ? 'not-allowed' : 'pointer'};" onclick="placeOrder()" ${selectedDeliveryFee === 0 ? 'disabled' : ''}>
                                Place Order
                            </button>
                        </div>
                    `}
                </div>
            `;

            const dropdownSelected = document.getElementById('dropdownSelected');
            const dropdownMenu = document.getElementById('dropdownMenu');
            dropdownSelected.addEventListener('click', () => dropdownMenu.classList.toggle('show'));
            document.addEventListener('click', (e) => {
                if (!dropdownSelected.contains(e.target) && !dropdownMenu.contains(e.target)) {
                    dropdownMenu.classList.remove('show');
                }
            });
            pushState('cart');
        }

        function selectSchedule(value) {
            const dropdownSelected = document.getElementById('dropdownSelected');
            const scheduleInput = document.getElementById('schedule');
            const displayText = value === 'now' ? 'Now' : value === '12pm' ? 'Lunch (12 PM)' : 'Dinner (6 PM)';
            dropdownSelected.textContent = displayText;
            scheduleInput.value = value;
            document.getElementById('dropdownMenu').classList.remove('show');
        }

        function removeFromCart(index) {
            cart.splice(index, 1);
            localStorage.setItem('cart', JSON.stringify(cart));
            showCart();
            updateCartBadge();
        }

        function placeOrder() {
    const phoneInput = document.getElementById('phone');
    const phone = phoneInput.value;
    const schedule = document.getElementById('schedule').value;

    if (!phone || !/^\d{10}$/.test(phone)) {
        phoneInput.classList.add('error-input');
        showNotification('Error', 'Please enter a valid 10-digit phone number.', true);
        return;
    }
    phoneInput.classList.remove('error-input');
    userProfile.phone = phone;
    localStorage.setItem('userProfile', JSON.stringify(userProfile));

    const order = {
        orderId: `ORD${Date.now()}`,
        items: cart,
        total: selectedDeliveryFee === 0 
            ? cart.reduce((sum, item) => sum + (item.price * item.quantity), 0) // Base price only when no location
            : cart.reduce((sum, item) => sum + calculateTotal(item.price, item.itemDeliveryFee, selectedDeliveryFee, item.quantity), 0), // Full price with fees when location is set
        location: selectedHall,
        phone: phone,
        schedule: schedule,
        timestamp: new Date().toISOString(),
        estTime: locations.find(z => z.halls.includes(selectedHall))?.estTime || 'Unknown time',
        status: 'Pending'
    };

    showOrderConfirmation(order);
    cart = [];
    localStorage.setItem('cart', JSON.stringify(cart));
    updateCartBadge();
}
function showOrderConfirmation(order) {
    const mainContent = document.getElementById('mainContent');
    const isLocationSet = order.location && selectedDeliveryFee !== 0; // Check if location is set
    mainContent.innerHTML = `
        <div class="menu-view">
            <div class="navigation-bar">
                <button class="back-btn" onclick="navigateBack()" aria-label="Back to restaurants"><i class="fas fa-arrow-left"></i></button>
                <div class="search-wrapper"></div>
            </div>
            <h2 style="margin-bottom: 20px;">Order Confirmed!</h2>
            <div style="background: white; padding: 20px; border-radius: 10px;">
                <p><strong>Order ID:</strong> ${order.orderId}</p>
                <p><strong>Items:</strong> ${order.items.map(item => `${item.name} (x${item.quantity})`).join(', ')}</p>
                <p><strong>Total:</strong> KES ${order.total} ${isLocationSet ? '' : '(Excludes delivery fees - location not set)'}</p>
                <p><strong>Delivery to:</strong> ${order.location || 'Not specified'}</p>
                <p><strong>Estimated Delivery:</strong> ${order.schedule === 'now' ? order.estTime : order.schedule === '12pm' ? '12 PM' : '6 PM'}</p>
                <p><strong>Phone:</strong> ${order.phone}</p>
                <button style="width: 100%; padding: 15px; background: #9b59b6; color: white; border: none; border-radius: 5px; margin-top: 20px;" onclick="navigateTo('restaurantGrid')">Continue Ordering</button>
            </div>
        </div>
    `;
    pushState('orderConfirmation');
}


function navigateTo(view, data = {}) {
    if (view === 'restaurantGrid') showRestaurantGrid();
    else if (view === 'restaurantMenu') showRestaurantMenu(data.id);
    else if (view === 'dishDetail') showDishDetail(data.id, data.restaurantId, data.category);
    else if (view === 'cart') showCart();
    else if (view === 'orderConfirmation') showOrderConfirmation(data.order);

    if (view !== navigationStack[navigationStack.length - 1]) {
        navigationStack.push(view);
        history.pushState({ view, ...data }, '', `#${view}`);
    }
    currentView = view;
}

function navigateBack() {
    if (navigationStack.length > 1) {
        navigationStack.pop();
        const previousView = navigationStack[navigationStack.length - 1];
        currentView = previousView;

        if (previousView === 'restaurantGrid') {
            showRestaurantGrid();
            history.pushState({ view: 'restaurantGrid' }, '', '#restaurantGrid');
        } else if (previousView === 'restaurantMenu') {
            showRestaurantMenu(currentRestaurantId);
            history.pushState({ view: 'restaurantMenu', id: currentRestaurantId }, '', '#restaurantMenu');
        } else if (previousView === 'dishDetail') {
            showDishDetail(currentDishId, currentRestaurantId, currentCategory);
            history.pushState({ view: 'dishDetail', id: currentDishId, restaurantId: currentRestaurantId, category: currentCategory }, '', '#dishDetail');
        } else if (previousView === 'cart') {
            showCart();
            history.pushState({ view: 'cart' }, '', '#cart');
        } else if (previousView === 'orderConfirmation') {
            const orderData = { items: cart, total: cart.reduce((sum, item) => sum + (item.price * item.quantity), 0) };
            showOrderConfirmation(orderData);
            history.pushState({ view: 'orderConfirmation', order: orderData }, '', '#orderConfirmation');
        }
    } else {
        navigationStack = ['restaurantGrid'];
        currentView = 'restaurantGrid';
        showRestaurantGrid();
        history.pushState({ view: 'restaurantGrid' }, '', '#restaurantGrid');
    }
}
window.addEventListener('popstate', (event) => {
    const state = event.state || { view: 'restaurantGrid' };
    const view = state.view;

    // Sync navigation stack
    if (navigationStack.length > 1) {
        navigationStack.pop(); // Back navigation
    } else {
        // At root, reset to restaurantGrid
        navigationStack = ['restaurantGrid'];
    }

    currentView = view;

    // Render the view
    if (view === 'restaurantGrid') {
        showRestaurantGrid();
    } else if (view === 'restaurantMenu') {
        showRestaurantMenu(state.id);
    } else if (view === 'dishDetail') {
        showDishDetail(state.id, state.restaurantId, state.category);
    } else if (view === 'cart') {
        showCart();
    } else if (view === 'orderConfirmation') {
        showOrderConfirmation(state.order);
    }
});
        // Initialize the page
        showRestaurantGrid();
    </script>
</body>
</html>